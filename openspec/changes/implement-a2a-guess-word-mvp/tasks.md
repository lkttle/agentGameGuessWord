## 1. 基础搭建与数据模型

- [x] 1.1 配置运行环境变量（SecondMe OAuth、数据库、应用 URL）并提供 `.env.example`。
- [x] 1.2 创建核心数据表与索引（User、Room、Match、RoundLog、LeaderboardEntry、MetricEvent）。
- [x] 1.3 定义共享领域类型与状态常量（room status、match status、mode、score fields）。

## 2. OAuth 与会话安全

- [ ] 2.1 实现 SecondMe OAuth 登录入口与回调 code 交换（服务端）。
- [ ] 2.2 实现会话创建、读取、登出接口，并确保前端不可见原始 token。
- [ ] 2.3 实现 state/nonce 校验与错误回调处理（拒绝非法回调）。

## 3. 房间生命周期与猜词引擎

- [ ] 3.1 实现房间接口：创建、加入、开始、结束，并强制 WAITING->RUNNING->FINISHED 状态流转。
- [ ] 3.2 实现首字母猜词规则引擎（出题、猜测判定、回合推进、得分计算）。
- [ ] 3.3 实现回合超时与兜底策略，确保对局不会卡死。

## 4. Agent 编排与人机对战

- [ ] 4.1 实现 Agent vs Agent 回合编排器（按序调用、上下文注入、失败重试/兜底）。
- [ ] 4.2 实现 Human vs Agent 出招接口与输入校验（格式和回合权限校验）。
- [ ] 4.3 实现房间/对局状态查询接口与前端轮询更新逻辑。

## 5. 榜单、战报与指标

- [ ] 5.1 在对局结算时同步更新日榜/总榜数据并实现榜单查询接口。
- [ ] 5.2 实现对局结果页与分享数据接口（参与者、结果、关键统计）。
- [ ] 5.3 实现关键漏斗指标埋点（登录成功、开局、完局）与聚合查询接口。

## 6. 稳定性验证与提交准备

- [ ] 6.1 编写最小化联调脚本/种子数据，支持快速复现两种对战模式。
- [ ] 6.2 执行完整 Demo 验收：登录->开局->对战->结算->榜单/分享，修复阻断问题。
- [ ] 6.3 完成线上部署与 OAuth 回调配置，确认公开 URL 可访问并准备提交材料。
